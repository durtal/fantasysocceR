<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>pastseasons</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>

<style type="text/css">

/* padding for bootstrap navbar */
body {
  padding-top: 20px;
  padding-bottom: 20px;
}
@media (max-width: 979px) {
  body {
    padding-top: 0;
  }
}

/* offset scroll position for anchor links (for fixed navbar)  */
@media (min-width: 980px) {
  .section h2 {
    padding-top: 52px;
    margin-top: -52px;
  }
  .section h3 {
    padding-top: 52px;
    margin-top: -52px;
  }
}

p{
  font-size: 13px;
}
/* don't use link color in navbar */
.dropdown-menu>li>a {
  color: black;
}

/* some padding for disqus */
#disqus_thread {
  margin-top: 45px;
}

</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<h1>fantasysocceR</h1>
<p></p>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://github.com/durtal">durtal@github</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="index.html">Home</a></li>
                <li class="dropdown">
                    <a href="datasets" class="dropdown-toggle" data-toggle="dropdown">
                        Datasets <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">Current Data</li>
                        <li><a href="players.html">players</a></li>
                        <li><a href="pastseasons.html">pastseasons</a></li>
                        <li class="dropdown-header">Old Data</li>
                        <li><a href="players201415.html">players201415</a></li>
                        <li><a href="pastseasons201415.html">pastseasons201415</a></li>
                        <li><a href="season201415.html">season201415</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="functions" class="dropdown-toggle" data-toggle="dropdown">
                        Functions <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="using_functions.html">Using functions</a></li>
                        <li class="dropdown-header">Function Help</li>
                        <li><a href="collect_ff.html">collect_ff</a></li>
                        <li><a href="players_df.html">players_df</a></li>
                        <li><a href="pastseasons_df.html">pastseasons_df</a></li>
                        <li><a href="currentseason_df.html">currentseason_df</a></li>
                        <li><a href="team_pal.html">team_pal</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div id="header">
<h1 class="title">pastseasons</h1>
</div>


<p>The <strong>pastseasons</strong> dataset contains performance data for past seasons for all current players in the <a href="http://fantasy.premierleague.com">fantasy.premierleague.com</a> game. Not all players in the game have past data, those who are making their debut in the game, these players are still included in the dataset but their performance data is recorded as NA</p>
<p>Once the package has been loaded, to access the dataset:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(pastseasons)</code></pre>
<p>The dataframe has dimensions 1920 rows and 24 columns.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(pastseasons)</code></pre>
<pre><code>## &#39;data.frame&#39;:    1920 obs. of  24 variables:
##  $ id      : num  1 1 1 1 1 1 1 2 3 3 ...
##  $ name    : chr  &quot;Szczesny&quot; &quot;Szczesny&quot; &quot;Szczesny&quot; &quot;Szczesny&quot; ...
##  $ pos     : chr  &quot;Goalkeeper&quot; &quot;Goalkeeper&quot; &quot;Goalkeeper&quot; &quot;Goalkeeper&quot; ...
##  $ team    : chr  &quot;Arsenal&quot; &quot;Arsenal&quot; &quot;Arsenal&quot; &quot;Arsenal&quot; ...
##  $ pts     : num  47 47 47 47 47 47 47 76 38 38 ...
##  $ value   : num  5 5 5 5 5 5 5 5 5.5 5.5 ...
##  $ pct     : num  0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.7 30.2 30.2 ...
##  $ season  : chr  &quot;2008/09&quot; &quot;2009/10&quot; &quot;2010/11&quot; &quot;2011/12&quot; ...
##  $ mins    : num  0 0 1350 3420 2250 ...
##  $ goals   : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ assists : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ cs      : num  0 0 6 13 10 16 3 8 0 0 ...
##  $ ga      : num  0 0 19 49 24 41 21 11 9 17 ...
##  $ og      : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ pens_svd: num  0 0 1 1 1 1 0 0 0 0 ...
##  $ pens_msd: num  0 0 0 0 0 0 0 0 0 0 ...
##  $ yel     : num  0 0 1 2 1 2 1 0 1 0 ...
##  $ red     : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ saves   : num  0 0 45 82 71 113 44 47 58 60 ...
##  $ bonus   : num  0 0 0 8 3 4 0 0 1 2 ...
##  $ ea_ppi  : num  0 0 0 469 314 475 172 241 0 0 ...
##  $ bps     : num  0 0 0 0 0 194 215 301 0 0 ...
##  $ fin_val : num  4.5 4.5 4.3 5.9 5.3 5.9 5.2 5 6.4 6.5 ...
##  $ ssn_pts : num  0 0 62 139 102 157 47 76 98 120 ...</code></pre>
<p>The <strong>pastseasons</strong> dataset could potentially be used to build a model to predict performance for the coming season, but unfortunately the dataset doesnâ€™t include the pre-season data for each of those seasons. For example, Shay Given has previously played for Newcastle and Manchester City, but only his current club (Aston Villa) is recorded in the dataset.</p>
<p>A model based on the points a players scored in previous season is unfortunately not that great. I reduce the dataset so it only includes data for 2010/11, 2011/12, 2012/13, 2013/14 and 2014/15, and reduce the number of variables.</p>
<pre class="sourceCode r"><code class="sourceCode r">tmp &lt;-<span class="st"> </span><span class="kw">subset</span>(pastseasons, season ==<span class="st"> &quot;2010/11&quot;</span> |<span class="st"> </span>season ==<span class="st"> &quot;2011/12&quot;</span> |<span class="st"> </span>season ==<span class="st"> &quot;2012/13&quot;</span> |<span class="st"> </span>season ==<span class="st"> &quot;2013/14&quot;</span> |<span class="st"> </span>season ==<span class="st"> &quot;2014/15&quot;</span>,
              <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;id&quot;</span>, <span class="st">&quot;pos&quot;</span>, <span class="st">&quot;team&quot;</span>, <span class="st">&quot;pct&quot;</span>, <span class="st">&quot;value&quot;</span>, <span class="st">&quot;season&quot;</span>, <span class="st">&quot;fin_val&quot;</span>, <span class="st">&quot;ssn_pts&quot;</span>))
<span class="kw">dim</span>(tmp)</code></pre>
<pre><code>## [1] 1392    9</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># we need the reshape2 package, to create a &#39;long&#39; dataframe, with one player per row</span>
<span class="kw">library</span>(reshape2)
ssn2ssn &lt;-<span class="st"> </span><span class="kw">dcast</span>(tmp, name +<span class="st"> </span>id +<span class="st"> </span>pos +<span class="st"> </span>team +<span class="st"> </span>pct +<span class="st"> </span>value ~<span class="st"> </span>season, <span class="dt">value.var =</span> <span class="st">&quot;ssn_pts&quot;</span>)
<span class="kw">head</span>(ssn2ssn)</code></pre>
<pre><code>##          name id        pos    team  pct value 2010/11 2011/12 2012/13
## 1    Szczesny  1 Goalkeeper Arsenal  0.1   5.0      62     139     102
## 2      Ospina  2 Goalkeeper Arsenal  0.7   5.0      NA      NA      NA
## 3        Cech  3 Goalkeeper Arsenal 30.2   5.5     158     127     144
## 4   Koscielny  4   Defender Arsenal 17.8   6.0      85     103      88
## 5 Mertesacker  5   Defender Arsenal 15.2   5.5      NA      59     135
## 6     Gabriel  6   Defender Arsenal  0.2   5.0      NA      NA      NA
##   2013/14 2014/15
## 1     157      47
## 2      NA      76
## 3     146      38
## 4     155     120
## 5     157     121
## 6      NA      16</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># rename the variables with numbers in them (just for ease of typing later)</span>
<span class="kw">names</span>(ssn2ssn)[<span class="dv">7</span>:<span class="dv">10</span>] &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;s&quot;</span>, <span class="dv">1</span>:<span class="dv">4</span>)

<span class="co"># now plot season to season points</span>
<span class="kw">ggplot</span>(ssn2ssn, <span class="kw">aes</span>(<span class="dt">x =</span> s1, <span class="dt">y =</span> s2)) +
<span class="st">    </span><span class="kw">geom_point</span>() +
<span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> s2, <span class="dt">y =</span> s3)) +
<span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> s3, <span class="dt">y =</span> s4)) +
<span class="st">    </span><span class="kw">theme_minimal</span>() +
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Season 1&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Season 2&quot;</span>) +
<span class="st">    </span><span class="kw">facet_wrap</span>(~pos)</code></pre>
<p><img src="pastseasons_files/figure-html/unnamed-chunk-4-1.png" title="" alt="" width="672" style="display: block; margin: auto;" /></p>
<a href="https://github.com/durtal/fantasysocceR" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#d9230f; color:#fcfcfc; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
